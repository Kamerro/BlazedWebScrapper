@page "/ksiegarnia"
@using BlazedWebScrapper.Data;
@using HtmlAgilityPack;
@*<PageTitle>Ksiegarnia</PageTitle>

<h1>Tutaj książki</h1>

<button onclick="@(()=> {click = "Lol ale troll";})"> @((MarkupString)click) </button>
<h2>@siemaEniu + @(2+2)</h2>

@if(number == 10)
{
    <p>Number is 10</p>
}
else
{
    <p>number is not 10</p>
}

<input type="checkbox" name="this" onclick="@TrueOrFalse"/>

@foreach (var client in clients)
{
    @if (!value)
    {
        <ClientComponent client="client"></ClientComponent>
    }

}
<InputComponent placeholder="Placeholder 01" type="text" disabled ="true" ></InputComponent>


@code{
    public List<Client> clients;
    public string click = "<b>Click<b>";
    public string siemaEniu = "Eniu hej ";
    public int number = 1;
    public bool value = false;
    protected override void OnInitialized()
    {
        base.OnInitialized();
        clients = new List<Client>() {
        new Client() {
            Name = "First", ID = "01" },
       new Client() { Name = "Sec", ID = "02" } };
    }
    public void TrueOrFalse()
    {
        value = !value;
    }
}*@
<body>
    <div>
    <div>
        <div style="width:100%;height:50px;text-align:center;">
            <h2>Witaj dobry człowieku tutaj możesz wyszukać książki!</h2>
        </div>
        <div style="height:10px;width:100%">
        </div>
        <div style="margin-left:30%;width:100%">
            <input type="text" style="width:30%;height:60px; margin-bottom:30px" placeholder="@Author @Title"/>
            <button type="button" @onclick="searchText"><img src="css/open-iconic/font/fonts/searchIcon.png"></button>
        </div>
    </div>
    <div>
        <h3>Lub wybierz z proponowanych:</h3>
            <table style="text-align:center;">
                <tr>
                    <th>Autor</th>
                    <th>Tytuł</th>
                </tr>
                <tr>
                    <td 
                        @onclick="() => setAuthor(GabrielGarciaMarquez)"
                        @onmouseover="changeColor" @onmouseleave="changeColorBack"
                        style="background-color:@tileColor">
                        Gabriel García Márquez
                    </td>

                    <td @onclick="() => setTitle(StoLatSamotnosci)">Sto lat samotności</td>
                </tr>
                <tr>
                    <td>George Orwell</td>
                    <td>Rok 1984</td>
                </tr>
                <tr>
                    <td>J.R.R. Tolkien</td>
                    <td>Władca Pierścieni: Drużyna Pierścienia</td>
                </tr>
                <tr>
                    <td>Haruki Murakami</td>
                    <td>Kafka nad morzem</td>
                </tr>
                <tr>
                    <td>Margaret Atwood</td>
                    <td>Opowieść Podręcznej</td>
                </tr>
            </table>
    </div>
    </div>
</body>

@code {
    public string tileColor = "black";
    //Wydawnictwoniezwykle.
    //ksiegarnia.pwn.pl
    //nk.com.pl
    //albatros (ciężkie)
    //czytelnik.pl/
    public string Author = "hehe";
    public string StoLatSamotnosci = "Sto lat samotności";
    public string Title = "heheh";
    public string GabrielGarciaMarquez = "Gabriel Garcia Marquez";
    void setAuthor(string author)
    {
        Author = author;
    }
    void setTitle(string title)
    {
        Title = title;
    }
    void changeColor()
    {
        tileColor = "brown";
    }
    void changeColorBack()
    {
        tileColor = "black";
    }
    void searchText()
    {
        string fullText = Author + Title;
        string test = "https://czytelnik.pl/pl/c/Ksiegarnia/47";
        var web = new HtmlWeb();
        var doc = web.Load(test);
        var nodes = doc.DocumentNode.Descendants("div").ToList();
        var innerHtml = doc.DocumentNode.InnerHtml;     
        var innerText = doc.DocumentNode.InnerText;
        var doce = new HtmlDocument();
        //.Select(y => y.Descendants()
     //.Where(x => x.Attributes["class"].Value == "ProductCard ProductCard_layout_grid ProductCard_isProductOtherEdition "))
     //.ToList();
    }
}